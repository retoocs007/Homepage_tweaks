:root{
  --rocket-size: 14px;
  --rocket-angle: 300deg;         /* your direction */
  --leg: 35s;                     /* one pass duration */
  --legs: calc(var(--leg) * 8);   /* 8 start positions */
}

html, body { height: 100%; }
body { position: relative; }

/* === ROCKET SPRITE === */
body::after{
  content:"";
  position: fixed;
  top: 0; left: 0;
  width: var(--rocket-size);
  height: calc(var(--rocket-size) * 2);
  z-index: 6;
  pointer-events: none;
  background:
    url("data:image/svg+xml;utf8,\
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 100'>\
        <style>.s{stroke:%23000;stroke-width:2;stroke-linejoin:round;stroke-linecap:round}</style>\
        <path class='s' d='M25 3c11 10 16 28 14 51H11C9 31 14 13 25 3Z' fill='%23ececec'/>\
        <path class='s' d='M25 3 36 16 14 16Z' fill='%23ff4d4d'/>\
        <circle class='s' cx='27' cy='36' r='8' fill='%238aa0b6'/>\
        <circle class='s' cx='27' cy='36' r='5.5' fill='%23188cf0'/>\
        <path class='s' d='M11 54 2 66 14 63Z' fill='%23ff4d4d'/>\
        <path class='s' d='M39 54 48 66 36 63Z' fill='%23ff4d4d'/>\
        <rect class='s' x='20' y='54' width='10' height='9' rx='2' ry='2' fill='%23999'/>\
        <path class='s' d='M25 63 15 77 25 72 35 77Z' fill='%23ffa62b'/>\
      </svg>") center / contain no-repeat;
  transform-origin: center;
}

/* ===== Primary method (with @property): smooth fly + snapped teleports ===== */
@supports (property(--ox)) {

  @property --ox { syntax: '<length-percentage>'; inherits: false; initial-value: 108vw; }
  @property --oy { syntax: '<length-percentage>'; inherits: false; initial-value: 82vh; }
  @property --tx { syntax: '<length-percentage>'; inherits: false; initial-value: 0vw; }
  @property --ty { syntax: '<length-percentage>'; inherits: false; initial-value: 0vh; }

  body::after{
    transform: translate(calc(var(--ox) + var(--tx)), calc(var(--oy) + var(--ty)))
               rotate(var(--rocket-angle));
    animation:
      fly var(--leg) linear infinite,
      offsets var(--legs) steps(1, end) infinite;
  }

  /* one pass across screen; hide only at the very end */
  @keyframes fly{
    0%   { --tx: 0vw;      --ty: 0vh;      opacity: 1; }
    98%  {                  /* nearly off-screen */     opacity: 1; }
    99%  {                                              opacity: 0; }
    100% { --tx: -200vw;  --ty: -200vh;                 opacity: 0; }
  }

  /* 8 snapped start offsets (closer so the rocket appears sooner) */
  @keyframes offsets{
    0%,     12.499% { --ox: 108vw; --oy: 82vh; }
    12.5%,  24.999% { --ox: 120vw; --oy: 70vh; }
    25%,    37.499% { --ox: 102vw; --oy: 96vh; }
    37.5%,  49.999% { --ox: 128vw; --oy: 78vh; }
    50%,    62.499% { --ox: 110vw; --oy: 88vh; }
    62.5%,  74.999% { --ox: 134vw; --oy: 80vh; }
    75%,    87.499% { --ox: 118vw; --oy: 100vh; }
    87.5%,  100%    { --ox: 112vw; --oy: 74vh; }
  }
}

/* ===== Fallback (no @property): hide-before-jump trick, no visible zip ===== */
@supports not (property(--ox)) {

  body::after{ animation: rocketMulti var(--legs) linear infinite; }

  @keyframes rocketMulti{
    /* LEG 1 */
    0%   { visibility:hidden; transform: translate(108vw,82vh) rotate(var(--rocket-angle)); }
    0.1% { visibility:visible; transform: translate(108vw,82vh) rotate(var(--rocket-angle)); }
    12%  { visibility:visible; transform: translate(-92vw,-118vh) rotate(var(--rocket-angle)); }
    12.1%{ visibility:hidden; }

    /* LEG 2 */
    12.5%{ visibility:hidden; transform: translate(120vw,70vh) rotate(var(--rocket-angle)); }
    12.6%{ visibility:visible; transform: translate(120vw,70vh) rotate(var(--rocket-angle)); }
    24%  { visibility:visible; transform: translate(-80vw,-130vh) rotate(var(--rocket-angle)); }
    24.1%{ visibility:hidden; }

    /* LEG 3 */
    25%  { visibility:hidden; transform: translate(102vw,96vh) rotate(var(--rocket-angle)); }
    25.1%{ visibility:visible; transform: translate(102vw,96vh) rotate(var(--rocket-angle)); }
    36%  { visibility:visible; transform: translate(-98vw,-104vh) rotate(var(--rocket-angle)); }
    36.1%{ visibility:hidden; }

    /* LEG 4 */
    37.5%{ visibility:hidden; transform: translate(128vw,78vh) rotate(var(--rocket-angle)); }
    37.6%{ visibility:visible; transform: translate(128vw,78vh) rotate(var(--rocket-angle)); }
    48%  { visibility:visible; transform: translate(-72vw,-122vh) rotate(var(--rocket-angle)); }
    48.1%{ visibility:hidden; }

    /* LEG 5 */
    50%  { visibility:hidden; transform: translate(110vw,88vh) rotate(var(--rocket-angle)); }
    50.1%{ visibility:visible; transform: translate(110vw,88vh) rotate(var(--rocket-angle)); }
    60%  { visibility:visible; transform: translate(-90vw,-112vh) rotate(var(--rocket-angle)); }
    60.1%{ visibility:hidden; }

    /* LEG 6 */
    62.5%{ visibility:hidden; transform: translate(134vw,80vh) rotate(var(--rocket-angle)); }
    62.6%{ visibility:visible; transform: translate(134vw,80vh) rotate(var(--rocket-angle)); }
    72%  { visibility:visible; transform: translate(-66vw,-120vh) rotate(var(--rocket-angle)); }
    72.1%{ visibility:hidden; }

    /* LEG 7 */
    75%  { visibility:hidden; transform: translate(118vw,100vh) rotate(var(--rocket-angle)); }
    75.1%{ visibility:visible; transform: translate(118vw,100vh) rotate(var(--rocket-angle)); }
    84%  { visibility:visible; transform: translate(-82vw,-100vh) rotate(var(--rocket-angle)); }
    84.1%{ visibility:hidden; }

    /* LEG 8 */
    87.5%{ visibility:hidden; transform: translate(112vw,74vh) rotate(var(--rocket-angle)); }
    87.6%{ visibility:visible; transform: translate(112vw,74vh) rotate(var(--rocket-angle)); }
    96%  { visibility:visible; transform: translate(-88vw,-126vh) rotate(var(--rocket-angle)); }
    100% { visibility:hidden; }
  }
}
