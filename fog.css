/* ---FOG--- */
:root{
  --fog-tile: 640px;
  --fog-opacity: 0.08;
  --fog-speed: 115s;  /* drift duration */
}

/* Seamless stitched SVG fog */
body::before{
  content:"";
  position: fixed;
  inset: 0;
  z-index: 2;
  pointer-events: none;

  opacity: var(--fog-opacity);

  /* Seamless noise using feTurbulence with stitchTiles */
  background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='640' height='640' viewBox='0 0 640 640'>\
  <defs>\
    <filter id='fog' x='0' y='0' width='100%' height='100%'>\
      <feTurbulence type='fractalNoise' baseFrequency='0.012 0.018' numOctaves='2' seed='7' stitchTiles='stitch' result='n'/>\
      <feComponentTransfer in='n'>\
        <feFuncR type='table' tableValues='1 1'/>\
        <feFuncG type='table' tableValues='1 1'/>\
        <feFuncB type='table' tableValues='1 1'/>\
        <feFuncA type='table' tableValues='0 0.12 0.2 0.3 0.42 0.55 0.7 0.85'/>\
      </feComponentTransfer>\
    </filter>\
  </defs>\
  <rect width='640' height='640' filter='url(%23fog)'/>\
</svg>");
  background-size: var(--fog-tile) var(--fog-tile);
  background-repeat: repeat;

  /* animating background-position avoids the one-frame transform snap */
  animation: fogSlide var(--fog-speed) linear infinite;

  /* hints */
  contain: paint;
  will-change: background-position, opacity;
  backface-visibility: hidden;
}

/* move exactly one tile diagonally for a perfect, flick-free loop */
@keyframes fogSlide{
  from { background-position: 0 0; }
  to   { background-position: calc(var(--fog-tile) * -1) calc(var(--fog-tile) * -1); }
}
