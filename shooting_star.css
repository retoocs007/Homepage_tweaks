/* === SHOOTING STAR === START === */

:root{
  --star-size: 70px;
  --star-angle: 215deg;
  --leg: 3s;
  --legs: calc(var(--leg) * 8);
  --star-steps: 240;
}

body::after{
  content:"";
  position: fixed;
  top: 0; left: 0;
  width: var(--star-size);
  height: calc(var(--star-size) * 2);
  z-index: 6;
  pointer-events: none;
  background:
    url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 140 40'>\
  <defs>\
    <linearGradient id='t' x1='100%' y1='50%' x2='0%' y2='50%'>\
      <stop offset='0%' stop-color='%23fff' stop-opacity='0'/>\
      <stop offset='20%' stop-color='%23fff' stop-opacity='.25'/>\
      <stop offset='60%' stop-color='%23fff' stop-opacity='.6'/>\
      <stop offset='100%' stop-color='%23fff' stop-opacity='.95'/>\
    </linearGradient>\
    <radialGradient id='c' cx='100%' cy='50%' r='30%'>\
      <stop offset='0%' stop-color='%23fff'/>\
      <stop offset='100%' stop-color='%23fff' stop-opacity='0'/>\
    </radialGradient>\
  </defs>\
  <rect x='0' y='18' width='120' height='4' rx='2' fill='url(%23t)'/>\
  <circle cx='120' cy='20' r='6' fill='url(%23c)'/>\
</svg>") center / contain no-repeat;

  /* performance hints */
  will-change: transform, opacity;
  contain: paint;
  backface-visibility: hidden;
  transform-origin: center;
}

@supports not (property(--ox)) {

  body::after{
    animation: starMulti var(--legs) linear infinite both;
  }

  /* We run 8 legs in one timeline; opacity goes 0?1 after the jump.
     Motion is stepped to reduce compositor updates. */
  @keyframes starMulti{

    /* LEG 1 */
    0%   { opacity:0; transform: translate3d(110vw,80vh,0) rotate(var(--star-angle)); }
    0.1% { opacity:1; transform: translate3d(110vw,80vh,0) rotate(var(--star-angle)); }
    12%  {           transform: translate3d(-90vw,-120vh,0) rotate(var(--star-angle)); animation-timing-function: steps(var(--star-steps), end); }
    12.1%{ opacity:0; }

    /* LEG 2 */
    12.5%{ opacity:0; transform: translate3d(60vw,120vh,0) rotate(var(--star-angle)); }
    12.6%{ opacity:1; transform: translate3d(60vw,120vh,0) rotate(var(--star-angle)); }
    24%  {           transform: translate3d(-80vw,-130vh,0) rotate(var(--star-angle)); animation-timing-function: steps(var(--star-steps), end); }
    24.1%{ opacity:0; }

    /* LEG 3 */
    25%  { opacity:0; transform: translate3d(130vw,50vh,0) rotate(var(--star-angle)); }
    25.1%{ opacity:1; transform: translate3d(130vw,50vh,0) rotate(var(--star-angle)); }
    36%  {           transform: translate3d(-80vw,-110vh,0) rotate(var(--star-angle)); animation-timing-function: steps(var(--star-steps), end); }
    36.1%{ opacity:0; }

    /* LEG 4 */
    37.5%{ opacity:0; transform: translate3d(100vw,90vh,0) rotate(var(--star-angle)); }
    37.6%{ opacity:1; transform: translate3d(100vw,90vh,0) rotate(var(--star-angle)); }
    48%  {           transform: translate3d(-70vw,-120vh,0) rotate(var(--star-angle)); animation-timing-function: steps(var(--star-steps), end); }
    48.1%{ opacity:0; }

    /* LEG 5 */
    50%  { opacity:0; transform: translate3d(90vw,140vh,0) rotate(var(--star-angle)); }
    50.1%{ opacity:1; transform: translate3d(90vw,140vh,0) rotate(var(--star-angle)); }
    60%  {           transform: translate3d(-90vw,-160vh,0) rotate(var(--star-angle)); animation-timing-function: steps(var(--star-steps), end); }
    60.1%{ opacity:0; }

    /* LEG 6 */
    62.5%{ opacity:0; transform: translate3d(140vw,110vh,0) rotate(var(--star-angle)); }
    62.6%{ opacity:1; transform: translate3d(140vw,110vh,0) rotate(var(--star-angle)); }
    72%  {           transform: translate3d(-60vw,-120vh,0) rotate(var(--star-angle)); animation-timing-function: steps(var(--star-steps), end); }
    72.1%{ opacity:0; }

    /* LEG 7 */
    75%  { opacity:0; transform: translate3d(50vw,150vh,0) rotate(var(--star-angle)); }
    75.1%{ opacity:1; transform: translate3d(50vw,150vh,0) rotate(var(--star-angle)); }
    84%  {           transform: translate3d(-80vw,-140vh,0) rotate(var(--star-angle)); animation-timing-function: steps(var(--star-steps), end); }
    84.1%{ opacity:0; }

    /* LEG 8 */
    87.5%{ opacity:0; transform: translate3d(110vw,140vh,0) rotate(var(--star-angle)); }
    87.6%{ opacity:1; transform: translate3d(110vw,140vh,0) rotate(var(--star-angle)); }
    96%  {           transform: translate3d(-90vw,-110vh,0) rotate(var(--star-angle)); animation-timing-function: steps(var(--star-steps), end); }
    100% { opacity:0; }
  }
}

/* === SHOOTING STAR === END === */
